services:
  ingestion:
    image: ghcr.io/mcmaster-circ/canids-v2-ingestion:latest
    environment:
      - flags=--verbose
      - hostname=http://<BACKEND HOST>/websocket/
    depends_on:
      - zeek
    volumes: 
      - zeek:/logs
      - ingestiondb:/db
  
  zeek:
    image: ghcr.io/mcmaster-circ/canids-v2-zeek:latest
    network_mode: host
    volumes:
      - zeek:/usr/local/zeek/spool/zeek
    environment:
      - ZEEK_CMD=

volumes:
  ingestiondb:
  zeek: